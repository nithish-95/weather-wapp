<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Weather Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(
                function(position) {
                  const lat = position.coords.latitude;
                  const lon = position.coords.longitude;
                  window.location.href = `/weather/latlon?lat=${lat}&lon=${lon}`;
                },
                function(error) {
                  if (error.code === error.PERMISSION_DENIED) {
                    window.location.href = '/ip'; 
                  }
                }
              );
            } else {
              alert('Geolocation is not supported by this browser.');
              window.location.href = '/ip'; 
            }
          });
    </script>
  </head>
  <body class="bg-gray-200 flex items-center justify-center h-screen">
    <div class="max-w-xm w-72 p-4 bg-gray-50 rounded-2xl shadow-lg">
      <span class="relative flex h-3 w-3">
        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-600 opacity-75"></span>
        <span class="relative inline-flex rounded-full h-3 w-3 bg-blue-900"></span>
      </span>
      <div class="text-center">
        <p class="text-2xl p-2 font-bold text-blue-900 ">Loding weather data ...</p>
      </div>
    </div>


</body>
</html>


    <!-- forcast card -->
    <!-- <div class="forecast-container mt-6 w-full max-w-6xl">
        <h1 class=" text-xl font-bold text-blue-900 mb-4">Forecast for {{.Weather.Name}}</h1>
        <div class="forecast flex overflow-x-scroll space-x-4 p-2">
           
            {{range .Forecast.ListF}}
            <div class="forecast-item flex-shrink-0 w-1/6 bg-white p-4 rounded-lg shadow-md text-center">
                <div class="forecast-temp text-lg font-bold text-blue-900">{{.MainF.TempF}}°C</div>
                <div class="forecast-icon my-2">
                    {{range .WeatherF}}
                    <img src="http://openweathermap.org/img/wn/{{.IconF}}@2x.png" alt="Weather Icon" class="w-10 h-10 mx-auto">
                    {{end}}
                </div>
                <div class="forecast-desc text-blue-900 text-center font-bold">
                    {{range .WeatherF}}
                    {{.DescriptionF}}
                    {{end}}
                </div>
                <div class="forecast-time text-blue-900 text-center mt-2">
                    <div class="flex flex-col items-center">
                    {{formatUnixDay .DtTxtF}}
                    <span>{{formatUnixTime .DtTxtF}}</span>
                </div></div>
            </div>
            {{end}}
           
        </div>
    </div> -->

    <!-- forcast table -->
    <!-- <div class="forecast-container mt-6 max-w-6xl bg-white p-4 rounded-2xl shadow-md">
        <h1 class="text-center text-2xl font-bold text-blue-900 mb-4">Forecast for {{.Weather.Name}}</h1>
        <div class="overflow-x-auto">
            <table class="min-w-full table-auto ">
                <thead class="bg-blue-900 text-white">
                    <tr>
                        <th class="px-4 py-2">Date</th>
                        <th class="px-4 py-2">Temperature</th>
                        <th class="px-4 py-2">Weather</th>
                    </tr>
                </thead>
                <tbody>
                    {{range $index, $element := .Forecast.ListF}}
                    {{if lt $index 7}}
                    <tr class="text-center">
                        <td class="border px-4 py-2">
                            <div class="flex flex-col items-center">
                                {{formatUnixDay .DtTxtF}}
                                <span>{{formatUnixTime .DtTxtF}}</span>
                            </div>
                        </td>
                        <td class="border px-4 py-2">{{.MainF.TempF}}°C</td>
                        <td class="border px-4 py-2">
                            {{range .WeatherF}}
                            <div class="flex flex-col items-center">
                                <img src="http://openweathermap.org/img/wn/{{.IconF}}@2x.png" alt="Weather Icon" class="w-10 h-10">
                                <span>{{.DescriptionF}}</span>
                            </div>
                            {{end}}
                        </td>
                    </tr>
                    {{end}}
                    {{end}}
                </tbody>
            </table>
        </div>
    </div> -->
    